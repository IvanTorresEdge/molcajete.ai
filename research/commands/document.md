---
description: Create comprehensive documentation from research findings using multi-agent workflow and save to file
---

IMPORTANT: Immediately use the Task tool with subagent_type="res:orchestrator" to delegate ALL work to the research orchestrator agent. Do NOT do any analysis or work in the main context.

This command accepts optional arguments in these formats:
- /res:document (no args)
- /res:document <query>
- /res:document <filepath> <query>

Use this exact prompt for the agent:
"Create comprehensive documentation using multi-agent research workflow.

Handle arguments:
- IF filepath AND query provided: Use both directly
- IF query only: Use query, ask user for filepath before final save using AskUserQuestion with default: .molcajete/research/<auto-generated-name>.md
- IF no arguments: Ask user for topic using AskUserQuestion, then for filepath with default: .molcajete/research/<auto-generated-name>.md

Execute the multi-agent research workflow:

1. **Query Clarification**: If needed, ask clarifying questions using AskUserQuestion to understand scope and requirements.

2. **Query Analysis**: Determine detailed response format (this is documentation, not quick answer), complexity level, and research strategy.

3. **Session Management**: Create research session using session-management scripts.

4. **Research Planning**: Write comprehensive research plan targeting detailed documentation needs.

5. **Agent Coordination**: Spawn specialized agents (search, fetch, local) in parallel to gather comprehensive information. Prioritize:
   - Official documentation sources
   - Implementation examples
   - Local project patterns (if relevant)

6. **Synthesis**: Spawn synthesis agent with 'detailed' response type to create comprehensive documentation following research-methods detailed template.

7. **File Saving**: Synthesis agent will use AskUserQuestion to ask for filepath (if not provided) with default suggestion: .molcajete/research/<auto-generated-name>.md, then save using Write tool.

IMPORTANT: This command ALWAYS results in a file being saved. The synthesis agent must:
- Use AskUserQuestion tool (NOT text questions) to ask about saving location
- Suggest .molcajete/research/ as the default directory
- Auto-generate a kebab-case filename from the query (e.g., 'react-hooks-guide.md')
- Ensure the documentation is written to the selected file path using Write tool"
